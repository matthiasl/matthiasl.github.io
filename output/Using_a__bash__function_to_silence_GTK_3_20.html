<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN'
'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>
<head>
<title>
Matthias' personal blog</title>
<link rel='stylesheet' type='text/css' media='screen' href='./style.css'/>
</head>
<body>
<div id='outer'>
<div id='masthead'>
<a href='index.html'>Matthias' personal blog</a><br/><span id='subtitle'/></div>
<div id='articles'>
<div id='sidebar'>
<div id='about'>
<h3>
ABOUT</h3>

<p>
 This is my personal blog. I also write on the
<a href='https://blog.corelatus.com'>Corelatus blog</a>.
</p>
matthias@corelatus.com
</p>
</div>
<div id='toc'>
<h3>
CATEGORY: All</h3>
<h4>
2017</h4>
<div class='toc_entry'>
<a href='Using__fwknop__on_OpenWRT.html'>Using 'fwknop' on OpenWRT</a></div>
<h4>
2016</h4>
<div class='toc_entry'>
<a href='Watermarking_a_PDF_with_ghostscript.html'>Watermarking a PDF with ghostscript</a></div>
<div class='toc_entry'>
<a href='OpenWrt_on_a_TP_Link_TL_WR1043N_ND_v3.html'>OpenWrt on a TP-Link TL-WR1043N/ND v3</a></div>
<div class='toc_entry'>
<a href='Adjusting_the_external_monitor_backlight.html'>Adjusting the external monitor backlight</a></div>
<div class='toc_entry'>
<a href='Fixing_video_tearing_in_X__and_a_glance_at_Wayland___h2_.html'>Fixing video tearing in X (and a glance at Wayland)</h2></a></div>
<div class='toc_entry'>
<a href='Using_a__bash__function_to_silence_GTK_3_20.html'>Using a 'bash' function to silence GTK 3.20</a></div>
<div class='toc_entry'>
<a href='Having_an_online_resume_without_Linkedin.html'>Having an online resume without Linkedin</a></div>
</div>
<div id='categories'>
<h3>
CATEGORIES</h3>
<p>
<a href='index.html'>All articles(7)</a></p>
<p>
<a href='tagged_with_blog.html'>blog(7)</a></p>
</div>
</div>
<h2>
Using a 'bash' function to silence GTK 3.20</h2>
<p class='posted'>
<em>Posted October 5th 2016</em></p>
<p>
  Emacs and mutt started spewing warnings in my xterms a month
  or two ago. They look like this:
</p>

<pre>
(emacs:7719): Gtk-WARNING **: GtkWindow 0xd32290 is drawn without a current allocation. This should not happen.

(emacs:7719): Gtk-WARNING **: GtkWindow 0xd32290 is drawn without a current allocation. This should not happen.

(emacs:7719): Gtk-WARNING **: EmacsFixed 0xd36130 is drawn without a current allocation. This should not happen.

(emacs:7719): Gtk-WARNING **: EmacsFixed 0xd36130 is drawn without a current allocation. This should not happen.
</pre>

<p>
  The warnings annoy me. They're not relevant to what I'm doing;
  they're a GTK problem or an emacs problem. I silenced the
  warnings by adding this to my .bashrc:
</p>

<pre>
# 2016-10. GTK has an annoying new warning which causes emacs and lots
# of other X program to spew things like "GtkWindow 0xd34290 is drawn..."
# on stderr. So we have this function which redirects emacs and mutt stderr
# to /dev/null
#
# We can remove this when GTK disable the warning again, which will
# probably happen by 2017-06.
emacs()
{
  /usr/bin/emacs $* 2>/dev/null
}

mutt()
{
  /usr/bin/mutt $* 2>/dev/null
}
</pre>

<p>
  This lets me type 'emacs myfile.txt' and get an emacs started
  which doesn't dump rubbish in my terminal.
</p>

<p>
  (I could have used an <i>alias</i> for 'mutt', since I
  pretty much always run mutt without arguments. But for 'emacs'
  I had to use a function because I want the arguments passed.)
</p>

<p>
  FWIW, here's the
  <a href='https://mail.gnome.org/archives/commits-list/2016-May/msg06553.html'>
    commit</a> that made GTK dump debugging information to
  stderr by default. And here's
  the <a href='https://git.gnome.org/browse/gtk+/commit/?id=54fdcb3ffac3383432b379f3e16e8cb0086b8101'>commit</a>
  which fixed it again.
</p>

<p>
  Edit 2016-11-21: underlying problem is now fixed in Debian
  testing, so the above workaround is no longer needed.
</p>
<div class='article-terminator'><p><a href='Using_a__bash__function_to_silence_GTK_3_20.html'>Permalink</a> | Tags: <a href='tagged_with_blog.html'>blog</a></p></div></div>
</div>
</body>
</html>
